<html>
  <head>
    <title>How to install an old version of oTree</title>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css"
      integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <div class="container">
      <div class="page-header">
        <h1>How to install an old version of oTree</h1>
      </div>
      <p>
        If you originally developed your experiment in an old version of oTree
        such as 2.x or 3.x, then it may not run in the latest version. One
        option is to manually upgrade your code to the latest version of oTree,
        but this may not be an option for you because:
      </p>

      <ol>
        <li>
          If the project was written years ago or used undocumented features
          such as Django integration, it may take a lot of work to upgrade it to
          the latest version.
        </li>
        <li>
          Even if you can upgrade it to the latest oTree version, certain things
          might be slightly different. To guarantee reproducibility, it's safest
          to run it in the same version of oTree.
        </li>
      </ol>

      <p>
        Using an old version of oTree is easy. First, run this command (change
        2.3.4 to whatever version you want to use):
      </p>

      <p>
        <code>pip3 install otree==2.3.4</code>
      </p>

      <p>
        Also, open your project's <code>requirements.txt</code> or
        <code>requirements_base.txt</code>. In one of those files, there will be
        a line with the oTree version. Change that to:
        <code>otree==2.3.4</code> (substitute the version you want). This tells
        Heroku to also use that version. If you skip this step, you might end up
        with a different version of oTree on Heroku vs. locally, producing
        inconsistent results.
      </p>

      <h2>What if I need 2 different versions of oTree?</h2>

      <p>
        You might want 2 different versions of oTree, for example, if you are
        running an old experiment, but also developing a new experiment in the
        latest version. This is no problem. You can install many versions of
        oTree using separate Python virtual environments, a.k.a. "virtualenv".
        You can find lots of info online, but I will summarize here.
      </p>

      <p>
        First, it's best to install the same version of Python you originally
        ran the experiment with. For example, if you ran it with Python 3.6,
        then install a Python 3.6.x release from python.org. (This is necessary
        because some old versions of oTree don't run on the latest Python
        version.) You can have multiple versions of Python, such as 3.9 and 3.6,
        installed at the same time.
      </p>

      <p>
        If you aren't sure what version of Python the old experiment was
        developed on, you can consult
        <a
          href="https://en.wikipedia.org/wiki/History_of_Python#Table_of_versions"
          >this table</a
        >
        and look at what version of Python was released when you ran your
        experiment. But oTree tends to run a bit behind the latest release, so
        try using 1 minor version older, e.g. 3.5 instead of 3.6. (Anyway, if
        you try installing oTree on the wrong version of Python, usually it will
        tell you "wrong python version" immediately.)
      </p>

      <p>
        On Windows, go to your project folder and run a command similar to this:
      </p>

      <p>
        <code>py -3.6 -m venv venv</code>
      </p>

      <p>
        (This command says to create a Python 3.6 virtual environment, and to
        store that virtualenv's executable files in a folder called
        <code>venv/</code>.)
      </p>

      <p>Then activate this virtualenv with:</p>

      <p>
        <code>.\venv\Scripts\activate</code>
      </p>

      <p>
        (This command runs an executable called
        <code>activate</code> which is located inside the folder
        <code>venv/Scripts/</code>.)
      </p>

      <p>Install your desired version of oTree:</p>

      <p>
        <code>pip3 install otree==2.3.4</code>
      </p>

      <p>
        Then you can run <code>otree devserver</code> and all other commands.
        Each time you open your terminal/PowerShell, you need to re-activate
        that virtualenv with the above 'activate' command.
      </p>

      <p>
        Now that you are using virtualenv for one project, you should start
        using it for all projects. Repeat the above steps for as many different
        oTree versions as you need.
      </p>
    </div>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js"
      integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
